buildscript {
    repositories {
        mavenCentral()
        maven { url "https://dl.bintray.com/jetbrains/kotlin-native-dependencies" }
    }

    dependencies {
        classpath "org.jetbrains.kotlin:kotlin-native-gradle-plugin:${project.property('konan.plugin.version')}"
    }
}

apply plugin: 'konan'

konanArtifacts {
    framework('RxCommon', targets: ['iphone_sim', 'iphone']) {
        extraOpts '-module_name', ''
        enableMultiplatform true
    }

    program('test') {
        srcDir 'src/main/kotlin'
        commonSourceSets 'main', 'test'

        enableMultiplatform true
        extraOpts '-tr'
    }
}

dependencies {
    expectedBy project(':common')
}
